<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Exam Automator</title>
    <style>
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: #1a1a1a; color: white; overflow: hidden; }
        .toolbar { height: 60px; background: #333; display: flex; align-items: center; padding: 0 20px; gap: 20px; border-bottom: 2px solid #555; }
        #target-frame { width: 100vw; height: calc(100vh - 60px); border: none; background: white; }
        
        /* The Moving Mouse Visual */
        #ghost-mouse {
            width: 20px; position: absolute; top: 100px; left: 100px;
            z-index: 9999; pointer-events: none; transition: all 1.2s cubic-bezier(0.45, 0.05, 0.55, 0.95);
            filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.5));
        }
        button { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold; }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>

    <div class="toolbar">
        <button onclick="startAutoExam()">â–¶ START AUTOMATION</button>
        <div id="status">Status: <span style="color: #ffcc00;">Waiting for user...</span></div>
    </div>

    <iframe id="target-frame" src="/proxy"></iframe>

    <img id="ghost-mouse" src="https://upload.wikimedia.org/wikipedia/commons/3/3e/Mouse_cursor_arrow.svg">

    <script>
        async function startAutoExam() {
            const mouse = document.getElementById('ghost-mouse');
            const frame = document.getElementById('target-frame');
            const status = document.getElementById('status');
            const doc = frame.contentDocument || frame.contentWindow.document;

            status.innerHTML = "Status: <span style='color: #00ff00;'>Scanning page...</span>";

            // 1. Find the first input field
            const input = doc.querySelector('input');

            if (input) {
                // Get position of the input inside the frame
                const rect = input.getBoundingClientRect();
                
                // 2. Move the "Ghost Mouse" to that position
                mouse.style.top = (rect.top + 70) + "px"; // +70 to account for toolbar
                mouse.style.left = (rect.left + 10) + "px";

                await new Promise(r => setTimeout(r, 1200));

                // 3. Simulate Typing
                status.innerHTML = "Status: <span style='color: #00ff00;'>Typing answer...</span>";
                input.focus();
                let text = "This answer was generated by the bot.";
                for(let char of text) {
                    input.value += char;
                    await new Promise(r => setTimeout(r, 50)); 
                }
                
                status.innerHTML = "Status: <span style='color: #00ff00;'>Completed!</span>";
            } else {
                status.innerHTML = "Status: <span style='color: #ff4444;'>No input field found on this site.</span>";
            }
        }
    </script>
</body>
</html>

