<!DOCTYPE html>
<html>
<head>
    <style>
        body { margin: 0; background: #000; color: white; font-family: sans-serif; }
        #toolbar { height: 50px; display: flex; align-items: center; padding: 0 20px; background: #222; }
        iframe { width: 100%; height: calc(100vh - 50px); border: none; background: white; }
        #mouse { 
            position: absolute; width: 20px; z-index: 9999; 
            transition: all 1s ease-in-out; pointer-events: none;
        }
        button { background: #28a745; color: white; border: none; padding: 8px 15px; cursor: pointer; border-radius: 4px; }
    </style>
</head>
<body>
    <div id="toolbar">
        <button onclick="runBot()">â–¶ RUN BOT ON ABHYAS.AI</button>
        <div id="msg" style="margin-left: 20px;">Ready</div>
    </div>

    <img id="mouse" src="https://upload.wikimedia.org/wikipedia/commons/3/3e/Mouse_cursor_arrow.svg">
    <iframe id="site-frame" src="/stream-site"></iframe>

    <script>
        async function runBot() {
            const frame = document.getElementById('site-frame');
            const mouse = document.getElementById('mouse');
            const msg = document.getElementById('msg');
            const doc = frame.contentDocument || frame.contentWindow.document;

            msg.innerText = "Scanning for exam questions...";
            
            // Look for the common exam input box
            const input = doc.querySelector('input[type="text"]') || doc.querySelector('textarea');

            if (input) {
                const rect = input.getBoundingClientRect();
                // Move mouse to input (adjusting for toolbar height)
                mouse.style.top = (rect.top + 50) + "px";
                mouse.style.left = rect.left + "px";

                await new Promise(r => setTimeout(r, 1200));
                
                msg.innerText = "Typing answer...";
                input.focus();
                input.value = "This is an automated response from your bot.";
                msg.innerText = "Action Complete.";
            } else {
                msg.innerText = "No input found. Navigate to the exam page first.";
            }
        }
    </script>
</body>
</html>
